---
layout: default
description: How to download and install Church.IO Profiles.
---

<div class="steps">
  <h2>Install Church.IO Profiles</h2>
  <section class="row">
    <div class="span12">
      <p class="alert-message block-message success">
        Profiles is <strong>free software</strong>. All you need is to download the source code
        and deploy it to a server you control.
      </p>
      <p class="alert-message block-message warning">
        To <strong>upgrade</strong> an existing Profiles install, <a href="#upgrade">click here</a>.
      </p>
      <p>
        This document assumes you'll be deploying to the free cloud-based service <a href="http://heroku.com">Heroku</a>.
        If you want to install to another service or your own dedicated server, please hop onto the
        <a href="http://groups.google.com/group/churchio">mailing list</a> and get some help.
      </p>
    </div>
    <aside class="span4">
      <p>
        If you find something wrong or confusing with these instructions, please submit an
        <a href="https://github.com/churchio/website/issues">issue on GitHub</a> or let us know
        on the <a href="http://groups.google.com/group/churchio">mailing list</a>.
      </p>
    </aside>
  </section>

  <h3><span>1.</span> Create a Facebook "App"</h3>
  <section class="row">
    <div class="span12">
      <p>
        For the sake of these instructions, let's pretend your church's name is "OneChurch of Grand Rapids."
      </p>

      <ol>
        <li>Go to <a href="http://developers.facebook.com">developers.facebook.com</a> (log into Facebook if you're not already).</li>
        <li>Click on "Apps" at the top.</li>
        <li>Click the "Create New App" button.</li>
        <li>Enter your church name, e.g. "OneChurch of Grand Rapids"</li>
        <li>For the namespace, enter a similar name, but only with lowercase characters and dashes, e.g. "onechurch-grandrapids".</li>
        <li>On the app settings page, click "Website" and enter URL where your app will be, "http://onechurch-grandrapids.herokuapp.com" (see note at right for more help).</li>
        <li>Now copy the App ID and App Secret from the top of the page (we'll need this in a bit).</li>
        <li>Save changes.</li>
      </ol>
    </div>
    <aside class="span4">
      <p>
        Don't let this part scare you &mdash; all you have to do is to log into Facebook and enter a few bits of information
        to create what Facebook calls an "app."
      </p>

      <p>
        The app URL will be selected a bit later and will be <code><strong>something</strong>.herokuapp.com</code>. If the name you choose
        for your Heroku URL is already taken, you should choose another and come back to Facebook and change the website URL to match.
      </p>
    </aside>
  </section>

  <ul class="tabs">
    <li class="active"><a href="#" id="show-windows">Windows</a></li>
    <li><a href="#" id="show-mac">Mac</a></li>
    <li><a href="#" id="show-linux">Linux</a></li>
  </ul>

  <h3><span>2.</span> Install Ruby and Git</h3>
  <section class="row">
    <div class="span12">
      <p>
        You'll need to install Ruby and Git on your system in order to download and deploy to Heroku.
      </p>

      <ol>
        <li class="windows">
          Visit <a href="http://rubyinstaller.org/">rubyinstaller.org</a> and download the installer for Ruby 1.9.3.<br/>
          <img src="/images/screenshots/ruby_download.png" alt="Ruby Download"/>
        </li>
        <li class="windows">
          During the Ruby install, you should choose to have the Ruby executables added to your path:<br/>
          <img src="/images/screenshots/add_ruby_to_path.png" alt="Add Ruby to your PATH"/>
        </li>
        <li class="mac">
          You should already have Ruby on your Mac system. You can verify by running <code>ruby -v</code> and verifying it is version
          1.8.7 or higher.
        </li>
        <li class="linux">
          Use your system package manager to install Ruby, e.g. <code>sudo apt-get install ruby rubygems</code> (actual
          command will depend on your particular distribution).
        </li>
        <li>
          Once you have Ruby, open the <span class="windows">command prompt</span><span class="mac linux">terminal</span>
          and install the "heroku" gem with the following command:
          <div class="console">
            <span class="mac linux">sudo</span> gem install heroku
          </div>
        </li>
        <li class="windows mac">
          Visit <a href="http://git-scm.com/">git-scm.com</a> and click on <span class="windows">Windows</span>
          <span class="mac">Mac</span> on the right to install Git.
        </li>
        <li class="windows">
          Choose "Run Git from the Windows Command Prompt" when asked:<br/>
          <img src="/images/screenshots/git_install.png" alt="Add Git to your PATH"/>
        </li>
        <li class="linux">
          Use your system package manager to install Git. On some systems, the package is called "git-core".
        </li>
      </ol>
    </div>
    <aside class="span4">
      <p>Be sure you're installing these on your own desktop/laptop computer &mdash; <strong>not your server</strong>.</p>
    </aside>
  </section>

  <h3><span>3.</span> Download Profiles</h3>
  <section class="row">
    <div class="span12">
      <p>
        We'll use Git to download the source code for Profiles.
      </p>

      <p>
        In the <span class="windows">command prompt</span><span class="mac linux">terminal</span>,
        change to the directory where you want to download the package, then type the following commands:
      </p>

      <p class="console">
        git clone git://github.com/churchio/profiles.git<br/>
        cd profiles<br/>
      </p>
    </div>
    <aside class="span4 windows">
      <p>
        When you open a command prompt, you'll likely start in your
        "Users" directory. Be sure to <code>cd</code> into your Documents folder or
        another location you'll remember later.
      </p>
    </aside>
  </section>

  <h3><span>4.</span> Configure Profiles</h3>
  <section class="row">
    <div class="span12">
      <p>
        There are a few settings we need to configure before installation can occur.
      </p>

      <ol>
        <li>
          Create your new Heroku app with the following command, replacing NAME with the name you chose before, e.g.
          <code>onechurch-grandrapids</code>.
          <div class="console">
            heroku create --stack cedar NAME
          </div>
        </li>
        <li class="windows">
          On the Start menu, open "Git Bash" and type the following:
          <div class="console" style="background-color:#900;">
            ssh-keygen
          </div>
          You can accept each default setting by just pressing <em>enter</em>. Once your key has been generated,
          close this window and return to the command prompt for the next step.
        </li>
        <li>
          Add your ssh key to Heroku:
          <div class="console">
            heroku keys:add
          </div>
        </li>
        <li>
          Copy <code>config/settings.yml.example</code> to <code>config/settings.yml</code> and edit the file appropriately.
          Set the <code>facebook_app_id</code> and <code>facebook_secret</code> to what you copied down from step one above.
        </li>
        <li>
          Back in the <span class="windows">command prompt</span><span class="mac linux">terminal</span>, type:
          <div class="console">
            rake -f lib/tasks/heroku.rake profiles:heroku:config  
          </div>
          There are <strong style="color:#900">no line breaks</strong> in the above command.
        </li>
        <li>Then copy and paste the displayed commands into the
          <span class="windows">command prompt</span><span class="mac linux">terminal</span>.</li>
        <li>
          To set up outgoing email (optional; see note to the side), type the following:
          <div class="console">
            heroku addons:add sendgrid:starter
          </div>
        </li>
      </ol>
    </div>
    <aside class="span4">
      <p>
        If your chosen name is already taken, choose another and try again. Remember to go back to
        <a href="http://developers.facebook.com">developers.facebook.com</a> and update the website URL though.
      </p>
      <p>
        To see the list of possible time zones, run<br/><code>rake time:zones:all</code>.
      </p>
      <p>
        The <code>rake</code> command simply spits out the commands you need to
        type (or copy-paste) in order to configure the settings for Heroku.
      </p>
      <p>
        Setting up outgoing email (SendGrid) will require you to
        <a href="http://devcenter.heroku.com/articles/account-verification">verify</a> your
        account. Even though the add-on is free, Heroku requires you to enter credit
        card information to enable it.
      </p>
    </aside>
  </section>

  <h3><span>5.</span> Deploy</h3>
  <section class="row">
    <div class="span12">
      <p class="console">
        git push heroku master<br/>
        heroku run rake db:migrate
      </p>

      <p>Now, visit your new site!</p>
    </div>
    <aside class="span4">
      <p>
        The first user to log in is the initial admin user, so log in fast! :-)
      </p>
    </aside>
  </section>

  <h3 id="upgrade"><span>Upgrade</span></h3>

  <p>
    Upgrading an existing install of Profiles should be fairly straightforward
    thanks to Heroku's deployment architecture.
  </p>

  <p>
    Please follow the directions below for the version you're upgrading from + to.
  </p>

  <h4 id="upgrade-010-020">from 0.1.x to 0.2.0</h4>
  <section class="row">
    <div class="span12">
      <ol>
        <li>
          <div class="console">
            git pull
          </div>
        </li>
        <li>
          Open up your <code>config/settings.yml</code> file and add the following at the bottom:
          <pre style="margin-bottom:0;">smtp:
  from_address: no-reply@example.com</pre>
          (But change <code>@example.com</code> to the domain of your site instead.)
        </li>
        <li>
          <div class="console">
            rake -f lib/tasks/heroku.rake profiles:heroku:config  
          </div>
          ...and paste the output into your
          <span class="windows">command prompt</span><span class="mac linux">terminal</span>.
        </li>
        <li>
          To set up outgoing email (optional; see note to the side), type the following:
          <div class="console">
            heroku addons:add sendgrid:starter
          </div>
        </li>
        <li>
          <div class="console">
            git push heroku master<br/>
            heroku run rake db:migrate
          </div>
        </li>
      </ol>
    </div>
    <aside class="span4">
      <p>
        When you <code>git pull</code>, make sure there isn't a merge conflict. If there is a conflict, it's probably
        because you changed a file that was also changed in the app.
      </p>
      <p>
        You'll need to fix the conflict and make a commit.
        Alternatively, you can run <code>git reset --hard origin/master</code> and blow away any changes you've made
        (warning: you'll have to make your changes all over again).
      </p>
      <p>
        Setting up outgoing email (SendGrid) will require you to
        <a href="http://devcenter.heroku.com/articles/account-verification">verify</a> your
        account. Even though the add-on is free, Heroku requires you to enter credit
        card information to enable it.
      </p>
    </aside>
  </section>

  <section class="row">
    <div class="span12">
      <h3><span>Getting Help</span></h3>

      <p>
        To get help, please send a message to the <a href="http://groups.google.com/group/churchio">mailing list</a> or jump into the IRC
        chat room <a href="http://webchat.freenode.net/?channels=church.io&uio=d4">#church.io</a> on freenode.
      </p>
    </div>
  </section>
</div>

<script>
  showInstallBlock(location.hash);
  $('.tabs a').click(showInstallBlock);
</script>
